<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üå∏ Your Personal To-do List üí™</title>
<link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet" />
<style>
  body {
    font-family: 'Comic Neue', cursive, sans-serif;
    background: linear-gradient(135deg, #fff0f6, #f0f9ff);
    padding: 20px;
    color: #444;
    text-align: center;
    position: relative;
    overflow-x: hidden;
  }
  h1 {
    font-size: 2.4em;
    margin-bottom: 15px;
    color: #d26991;
    white-space: nowrap; /* prevent wrapping */
  }
  .category-list {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    margin: 15px 0;
    gap: 10px;
  }
  .category {
    background: #ffe6f0;
    border-radius: 25px;
    padding: 8px 18px;
    box-shadow: 0 2px 6px rgba(210, 105, 145, 0.3);
    cursor: pointer;
    font-weight: 700;
    user-select: none;
    transition: background-color 0.3s ease;
    color: #c75a87;
  }
  .category.active, .category:hover {
    background-color: #d26991;
    color: #fff;
    box-shadow: 0 4px 12px rgba(210, 105, 145, 0.5);
  }
  .task {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 18px;
    margin: 8px 0;
    background: #fff0f6;
    border-radius: 16px;
    box-shadow: 0 2px 7px rgba(210, 105, 145, 0.2);
    text-align: left;
    font-weight: 600;
    font-size: 1.05rem;
  }
  .high { border-left: 8px solid #e75480; }
  .medium { border-left: 8px solid #f2a2c0; }
  .low { border-left: 8px solid #f9c3db; }
  input, select, button {
    padding: 10px 14px;
    border-radius: 14px;
    border: 1.5px solid #f2a2c0;
    margin: 6px 4px;
    font-family: 'Comic Neue', cursive, sans-serif;
    font-weight: 600;
    font-size: 1rem;
    color: #a34265;
  }
  input:focus, select:focus {
    outline: none;
    border-color: #d26991;
    box-shadow: 0 0 8px rgba(210, 105, 145, 0.4);
  }
  button {
    background: #d26991;
    border: none;
    color: white;
    font-weight: 700;
    cursor: pointer;
    transition: transform 0.3s ease;
  }
  button:hover {
    background: #c75482;
    transform: scale(1.1);
  }
  .motivation {
    margin-top: 18px;
    font-style: italic;
    font-size: 1.1rem;
    color: #b15681;
    min-height: 2.2em;
  }
  /* Pop emojis container */
  .emoji-pop-container {
    position: fixed;
    pointer-events: none;
    top: 0; left: 0; right: 0; bottom: 0;
    overflow: visible;
    z-index: 9999;
  }
  .emoji-pop {
    position: absolute;
    font-size: 24px;
    opacity: 0.8;
    animation: popUp 1.2s forwards ease-out;
    user-select: none;
  }
  @keyframes popUp {
    0% {
      transform: translateY(0) scale(0.6);
      opacity: 0.8;
    }
    50% {
      opacity: 1;
      transform: translateY(-40px) scale(1.2);
    }
    100% {
      transform: translateY(-80px) scale(1);
      opacity: 0;
    }
  }
</style>
</head>
<body>

<h1>üå∏ Your personal Todo List üí™</h1>
<div>
  <input id="taskInput" type="text" placeholder="‚úçÔ∏è Task" autocomplete="off" />
  <input id="categoryInput" type="text" placeholder="üìÇ Category (your choice)" autocomplete="off" />
  <select id="priorityInput" aria-label="Priority">
    <option value="high">üî• High</option>
    <option value="medium">üåü Medium</option>
    <option value="low">üçÉ Low</option>
  </select>
  <button onclick="addTask()">‚ûï Add</button>
</div>

<div class="category-list" id="categoryList" aria-label="Categories"></div>

<div id="taskList" style="margin-top: 20px;"></div>

<div class="motivation" id="motivationText" aria-live="polite" aria-atomic="true"></div>

<div class="emoji-pop-container" id="emojiPopContainer"></div>

<script>
  const tasks = JSON.parse(localStorage.getItem("tasks") || "[]");
  let filterCategory = null;
  const motivations = [
    "üí™ You've got this!",
    "üåü Keep shining!",
    "üöÄ One step at a time!",
    "‚ú® Believe in yourself!",
    "üåà Small steps = Big changes!"
  ];
  const popEmojis = ['‚ú®', 'üíñ', 'üå∏', 'üí´', 'üå∑', 'üç•', 'üåü'];

  function randomMotivation() {
    return motivations[Math.floor(Math.random() * motivations.length)];
  }

  function randomEmoji() {
    return popEmojis[Math.floor(Math.random() * popEmojis.length)];
  }

  function popEmoji() {
    const container = document.getElementById('emojiPopContainer');
    const emojiEl = document.createElement('div');
    emojiEl.classList.add('emoji-pop');
    emojiEl.textContent = randomEmoji();

    // Random position near bottom center
    const x = window.innerWidth / 2 + (Math.random() * 100 - 50);
    const y = window.innerHeight - 50 + (Math.random() * 20 - 10);
    emojiEl.style.left = `${x}px`;
    emojiEl.style.top = `${y}px`;

    container.appendChild(emojiEl);

    setTimeout(() => {
      container.removeChild(emojiEl);
    }, 1200);
  }

  function generateId() {
    // simple unique ID based on timestamp + random number
    return Date.now().toString(36) + Math.random().toString(36).substring(2);
  }

  function addTask() {
    const taskInput = document.getElementById("taskInput");
    const categoryInput = document.getElementById("categoryInput");
    const priorityInput = document.getElementById("priorityInput");

    let text = taskInput.value.trim();
    let category = categoryInput.value.trim();
    let priority = priorityInput.value;

    if (!text) {
      alert("Please enter a task.");
      return;
    }
    if (!category) {
      category = "No category";
    }

    tasks.push({ id: generateId(), text, category, priority });
    localStorage.setItem("tasks", JSON.stringify(tasks));

    taskInput.value = "";
    categoryInput.value = "";
    renderTasks();
    renderCategories();
    updateMotivation();

    popEmoji();
  }

  function removeTask(id) {
    const index = tasks.findIndex(t => t.id === id);
    if (index !== -1) {
      tasks.splice(index, 1);
      localStorage.setItem("tasks", JSON.stringify(tasks));
      renderTasks();
      renderCategories();
      updateMotivation();
    }
  }

  function setCategory(cat) {
    filterCategory = cat;
    renderTasks();
    renderCategories();
    updateMotivation();
    popEmoji();
  }

  function renderCategories() {
    const catDiv = document.getElementById("categoryList");
    let categories = [...new Set(tasks.map(t => t.category))];
    
    // Clear and add "All" category
    catDiv.innerHTML = '';
    const allCat = document.createElement('div');
    allCat.className = `category ${filterCategory === null ? 'active' : ''}`;
    allCat.textContent = 'üåè All';
    allCat.onclick = () => setCategory(null);
    catDiv.appendChild(allCat);
    
    // Add other categories
    categories.forEach(c => {
      const catEl = document.createElement('div');
      catEl.className = `category ${filterCategory === c ? 'active' : ''}`;
      catEl.textContent = c;
      catEl.onclick = () => setCategory(c);
      catDiv.appendChild(catEl);
    });
  }

  function renderTasks() {
    const taskList = document.getElementById("taskList");
    taskList.innerHTML = "";

    let sorted = [...tasks].sort((a,b) => {
      const order = {high: 1, medium: 2, low: 3};
      return order[a.priority] - order[b.priority];
    });
    if (filterCategory) {
      sorted = sorted.filter(t => t.category === filterCategory);
    }

    sorted.forEach((task) => {
      const div = document.createElement("div");
      div.className = `task ${task.priority}`;
      
      const taskContent = document.createElement("div");
      const taskText = document.createTextNode(task.text);
      const small = document.createElement("small");
      small.textContent = ` (${task.category})`;
      
      taskContent.appendChild(taskText);
      taskContent.appendChild(small);
      
      const deleteButton = document.createElement("button");
      deleteButton.setAttribute('aria-label', 'Delete task');
      deleteButton.textContent = '‚ùå';
      deleteButton.onclick = () => removeTask(task.id);
      
      div.appendChild(taskContent);
      div.appendChild(deleteButton);
      
      taskList.appendChild(div);
    });
  }

  function updateMotivation() {
    const motivationText = document.getElementById("motivationText");
    motivationText.textContent = randomMotivation();
  }

  // Initialize
  renderTasks();
  renderCategories();
  updateMotivation();
</script>

</body>
</html>
